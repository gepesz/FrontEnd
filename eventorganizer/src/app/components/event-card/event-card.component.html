<div class="card">
    <div class="card-header">
        <h3>{{event.title}}</h3>
    </div>
    <div class="row no-gutters">
        <div class="col-md-4 d-flex align-items-center flex-column">
            <div class="p-2 my-2">
                <img src="{{environment.serverUrl}}/events/picture/{{event.pictureId}}">
                <div *ngIf="router.url === '/event-list'">
                    <div class="pb-1"></div>
                    <input style="display: none" type="file" (change)="onFileChanged($event)" #fileInput>
                </div>
            </div>
                <div class="p-2">
            <button class="btn btn-secondary" *ngIf="isLoggedIn$ | async" (click)="fileInput.click()">Kép feltöltése</button>
            </div>
            <div class="p-2">
            <button type="button" class="btn btn-warning" (click)="modifyEvent()" *ngIf="isLoggedIn$ | async">Esemény módosítása</button>
            </div>
            <div class="p-2">
                <div *ngIf="!setRatingSystem">
                <h4><ngb-rating class="align-self-center" [(rate)]="event.rating"></ngb-rating></h4>
                <pre>Értékelés: <b>{{event.rating}}</b></pre>
                </div>
                <div *ngIf="setRatingSystem && isLoggedIn$ | async">
                    <h4><ngb-rating [(rate)]="selected" (hover)="selected=$event" [readonly]="readonly"></ngb-rating></h4>
                    <pre>Értékelés: <b>{{selected}}</b></pre>
                    <button class="btn btn-secondary" type="button" (click)="sendTheRate()">Elküldöm</button>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="card-body">
                <p class="card-text"><small class="text-muted"><span class="font-weight-bold">Leírás:</span>
                        {{event.description}}</small></p>
                <p class="card-text"><small class="text-muted"><span class="font-weight-bold">Esemény
                            időpontja:</span> {{event.eventStartDate}}</small>
                </p>
                <p class="card-text"><small class="text-muted"><span class="font-weight-bold">Létszám:</span> min.
                        {{event.minNumberOfPeople}} fő, max.
                        {{event.maxNumberOfPeople}} fő</small></p>
                <p class="card-text"><small class="text-muted"><span class="font-weight-bold">Költségek:</span>
                        {{event.price}} Ft</small></p>
                <p class="card-text"><small class="text-muted"><span class="font-weight-bold">Kategória:</span>
                        {{event.categoryName}}</small></p>
                <h5>Jelentkezők száma: {{event.numberOfParticipants}}/{{event.maxNumberOfPeople}} fő</h5>
                <hr>
                <button *ngIf="event.pastEvent == false && isLoggedIn$ | async" type="button" class="btn btn-primary btn-lg btn-block" (click)='subscribeEvent()'
                     [disabled]="loading">
                    <span *ngIf="event.registeredForEvent">Leiratkozás</span>
                    <span *ngIf="!event.registeredForEvent">Feliratkozás</span>
                </button>
                <button *ngIf="event.pastEvent == true && isLoggedIn$ | async" type="button" class="btn btn-primary btn-lg btn-block" (click)='swapRating()'
                    [disabled]="loading">
                    <span *ngIf="!setRatingSystem">Hány csillagra értékeled az eventet?</span>
                    <span *ngIf="setRatingSystem">Kattints a csillagora az értékeléshez!</span>
                </button>
                <button type="button" class="btn btn-dark btn-lg btn-block" data-toggle="collapse"
                    attr.data-target="#collapseExample-{{event.id}}" aria-expanded="false"
                    aria-controls="collapseExample">Hozzászólás</button>
                <div class="collapse" id="collapseExample-{{event.id}}">
                    <div class="card shadow bg-secondary">
                        <div class="card-body">
                            <textarea class="message" cols="30" rows="10"></textarea>
                            <textarea class="userMessage" cols="30" rows="3"
                                placeholder="Írd ide az üzeneted"></textarea>
                            <button class="btn btn-primary" (click)='sendMessage()'>Küldés</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>